- name: Create custom databases 
  hosts: custom-desktop-box
  tasks:
    - name: Installing required dependencies so we can use Ansible MySQL modules
      apt: name={{ item }} state=present
      with_items:
        - mysql-client
        - python-mysqldb
    - name: Sush-E Database 
      mysql_db: name=sushe state=present encoding=utf8 collation=utf8_general_ci login_host=mysql login_user=root login_password=mysql

- name: Custom Desktop tweeks 
  hosts: custom-desktop-box
  tasks:
      - name: Install custom desktop packages
        apt: "name={{ item }} state=present"
        with_items:
           - cvs 
      - name: Copy hostname script to a safe place
        copy: src=scripts/add-host-name.sh dest=/tmp/add-host-name.sh owner=root group=root mode=755 backup=no
      - name: Add docker to hostfile
        command: /tmp/add-host-name.sh docker 192.168.44.60
      - name: Add rabbitmq to hostfile
        command: /tmp/add-host-name.sh rabbitmq 192.168.44.30
      - name: Add mongodb to hostfile
        command: /tmp/add-host-name.sh mongodb 192.168.44.30
      - name: Add mysql to hostfile
        command: /tmp/add-host-name.sh mysql 192.168.44.30
      - name: Add redis to hostfile
        command: /tmp/add-host-name.sh redis 192.168.44.30
      - name: Add memcached to hostfile
        command: /tmp/add-host-name.sh memcached 192.168.44.30
      - name: Add elasticsearch to hostfile
        command: /tmp/add-host-name.sh elasticsearch 192.168.44.30
      - name: Add nginx to hostfile
        command: /tmp/add-host-name.sh nginx 192.168.44.30
      - name: Add postgresql to hostfile
        command: /tmp/add-host-name.sh postgresql 192.168.44.30
      - name: Copy etc change script to a safe place
        copy: src=scripts/set-etc-environment.sh dest=/tmp/set-etc-environment.sh owner=root group=root mode=755 backup=no
      - name: Add silly environment variable 
        command: /tmp/set-etc-environment.sh RON_WAS_HERE true 
      - name: Copy Git configuration file
        copy: src=files/.gitconfig dest=/home/vagrant/.gitconfig owner=vagrant group=vagrant mode=644 backup=no
      - name: Copy bashrc change script to a safe place
        copy: src=scripts/append-line-to-bashrc.sh dest=/tmp/append-line-to-bashrc.sh owner=root group=root mode=755 backup=no
      - name: set editor to VI 
        command: /tmp/append-line-to-bashrc.sh editor 'set -o vi' 
      - name: Copy alias change script to a safe place
        copy: src=scripts/add-alias.sh dest=/tmp/add-alias.sh owner=root group=root mode=755 backup=no
      - name: add a silly alias 
        command: /tmp/add-alias.sh bob 'ls -alh' 
      - name: Create Asgard project directory
        file: path=/home/vagrant/Stash/Asgard state=directory
      - name: Create Gradle project directory
        file: path=/home/vagrant/Stash/Gradle state=directory
      - name: Create Khujand project directory
        file: path=/home/vagrant/Stash/Khujand state=directory
      - name: Create Mold-E project directory
        file: path=/home/vagrant/Stash/Mold-E state=directory
      - name: Create Sush-E project directory
        file: path=/home/vagrant/Stash/Sush-E state=directory
      - name: Set permissions on the home directory
        file: path=/home/vagrant owner=vagrant group=vagrant recurse=true state=directory
